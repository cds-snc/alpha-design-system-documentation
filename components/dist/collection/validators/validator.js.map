{"version":3,"file":"validator.js","sourceRoot":"","sources":["../../src/validators/validator.ts"],"names":[],"mappings":"AAeA,MAAM,CAAC,MAAM,gBAAgB,GAAmB;EAC9C,QAAQ,EAAE,CAAC,EAAO,EAAE,EAAE,CAAC,IAAI;CAC5B,CAAC;AAEF,MAAM,UAAU,iBAAiB,CAC/B,EAAgB,EAChB,EAAgB;EAEhB,IAAI,QAAsB,CAAC;EAE3B,QAAQ,GAAG;IACT,QAAQ,EAAE,CAAC,CAAI,EAAE,EAAE;MACjB,MAAM,IAAI,GAAY,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;MACrC,MAAM,IAAI,GAAY,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;MAErC,IAAI,CAAC,IAAI,EAAE;QACT,QAAQ,CAAC,YAAY,GAAG,EAAE,CAAC,YAAY,CAAC;OACzC;WAAM,IAAI,CAAC,IAAI,EAAE;QAChB,QAAQ,CAAC,YAAY,GAAG,EAAE,CAAC,YAAY,CAAC;OACzC;MAED,OAAO,IAAI,IAAI,IAAI,CAAC;IACtB,CAAC;GACF,CAAC;EACF,OAAO,QAAQ,CAAC;AAClB,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,OAAO,EAAE,IAAI,EAAE,OAAQ;EACvD,IAAI,OAAO,CAAC,QAAQ,EAAE;IACpB,QAAQ,IAAI,EAAE;MACZ,+CAA+C;MAC/C,KAAK,OAAO;QACV,QAAQ,OAAO,EAAE;UACf,KAAK,OAAO;YACV,IAAI,OAAO,CAAC,SAAS,EAAE;cACrB,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAC;aACjD;iBAAM;cACL,OAAO,CAAC,SAAS,GAAG,CAAC,oBAAoB,CAAC,CAAC;aAC5C;YACD,MAAM;UACR;YACE,IAAI,OAAO,CAAC,SAAS,EAAE;cACrB,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;aAC5C;iBAAM;cACL,OAAO,CAAC,SAAS,GAAG,CAAC,eAAe,CAAC,CAAC;aACvC;YACD,MAAM;SACT;QACD,MAAM;MACR,KAAK,QAAQ;QACX,IAAI,OAAO,CAAC,SAAS,EAAE;UACrB,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,qBAAqB,CAAC,CAAC;SAClD;aAAM;UACL,OAAO,CAAC,SAAS,GAAG,CAAC,qBAAqB,CAAC,CAAC;SAC7C;QACD,MAAM;MACR,KAAK,UAAU;QACb,IAAI,OAAO,CAAC,SAAS,EAAE;UACrB,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;SAC5C;aAAM;UACL,OAAO,CAAC,SAAS,GAAG,CAAC,eAAe,CAAC,CAAC;SACvC;QACD,MAAM;MACR,KAAK,MAAM;QACT,IAAI,OAAO,CAAC,SAAS,EAAE;UACrB,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;SAChD;aAAM;UACL,OAAO,CAAC,SAAS,GAAG,CAAC,mBAAmB,CAAC,CAAC;SAC3C;QACD,MAAM;MACR,KAAK,UAAU;QACb,IAAI,OAAO,CAAC,SAAS,EAAE;UACrB,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;SAC5C;aAAM;UACL,OAAO,CAAC,SAAS,GAAG,CAAC,eAAe,CAAC,CAAC;SACvC;QACD,MAAM;MACR,KAAK,UAAU;QACb,IAAI,OAAO,CAAC,SAAS,EAAE;UACrB,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;SAC/C;aAAM;UACL,OAAO,CAAC,SAAS,GAAG,CAAC,kBAAkB,CAAC,CAAC;SAC1C;QACD,MAAM;KACT;GACF;AACH,CAAC;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAiCE","sourcesContent":["export interface Validator<A> {\n  validate: (x: A) => boolean;\n  errorMessage?: object;\n}\n\nexport interface ValidatorEntry {\n  name: string;\n  options?: any;\n}\n\nexport interface GcdsErrorInterface {\n  id: string;\n  message: string;\n}\n\nexport const defaultValidator: Validator<any> = {\n  validate: (_x: any) => true,\n};\n\nexport function combineValidators<A>(\n  v1: Validator<A>,\n  v2: Validator<A>,\n): Validator<A> {\n  let combined: Validator<A>;\n\n  combined = {\n    validate: (x: A) => {\n      const res1: boolean = v1.validate(x);\n      const res2: boolean = v2.validate(x);\n\n      if (!res1) {\n        combined.errorMessage = v1.errorMessage;\n      } else if (!res2) {\n        combined.errorMessage = v2.errorMessage;\n      }\n\n      return res1 && res2;\n    },\n  };\n  return combined;\n}\n\nexport function requiredValidator(element, type, subtype?) {\n  if (element.required) {\n    switch (type) {\n      // Components all validate the \"value\" property\n      case 'input':\n        switch (subtype) {\n          case 'email':\n            if (element.validator) {\n              element.validator.unshift('requiredEmailField');\n            } else {\n              element.validator = ['requiredEmailField'];\n            }\n            break;\n          default:\n            if (element.validator) {\n              element.validator.unshift('requiredField');\n            } else {\n              element.validator = ['requiredField'];\n            }\n            break;\n        }\n        break;\n      case 'select':\n        if (element.validator) {\n          element.validator.unshift('requiredSelectField');\n        } else {\n          element.validator = ['requiredSelectField'];\n        }\n        break;\n      case 'textarea':\n        if (element.validator) {\n          element.validator.unshift('requiredField');\n        } else {\n          element.validator = ['requiredField'];\n        }\n        break;\n      case 'file':\n        if (element.validator) {\n          element.validator.unshift('requiredFileInput');\n        } else {\n          element.validator = ['requiredFileInput'];\n        }\n        break;\n      case 'checkbox':\n        if (element.validator) {\n          element.validator.unshift('requiredCheck');\n        } else {\n          element.validator = ['requiredCheck'];\n        }\n        break;\n      case 'fieldset':\n        if (element.validator) {\n          element.validator.unshift('requiredFieldset');\n        } else {\n          element.validator = ['requiredFieldset'];\n        }\n        break;\n    }\n  }\n}\n\n/*\nExample of parameter validator\n\nexport function getLengthValidator(min: number, max: number): Validator<string> {\n    // Create errorMessage object\n    let errorMessage = {};\n    if (min && max) {\n        errorMessage[\"en\"] = `You must enter between ${min} and ${max} characters`;\n        errorMessage[\"fr\"] = `French You must enter between ${min} and ${max} characters`;\n    } else if (min) {\n        errorMessage[\"en\"] = `You must enter at least ${min} characters`;\n        errorMessage[\"fr\"] = `French You must enter at least ${min} characters`;\n    } else if (max) {\n        errorMessage[\"en\"] = `You must enter less than ${max} characters`;\n        errorMessage[\"fr\"] = `French You must enter less than ${max} characters`;\n    }\n    return {\n        validate: (value: string) => {\n            value = value || '';\n            if (min && max) {\n                return min <= value.length && value.length <= max;\n            }\n            if (min) {\n                return min <= value.length;\n            }\n            if (max) {\n                return value.length <= max;\n            }\n            return true;\n        },\n        errorMessage\n    };\n}\n*/\n"]}