{% set navPages = collections.all | eleventyNavigation %}

{% macro renderNavListItem(entry) -%}
{% if not entry.hideMain %}
    <li{% if entry.url == page.url %} class="my-active-class"{% endif %}>
    {% if entry.url %}
        <a href="{{ entry.url | url }}" {% if entry.url == page.url %} aria-current="page" {% endif %} >{{ entry.title }}</a>
    {% else %}
        <span>{{ entry.title }}</span>
    {% endif %}

    {%- if entry.children.length -%}
    <ul>
        {%- for child in entry.children %}
            {% if child.locale == locale %}{{ renderNavListItem(child) }}{% endif %}
        {% endfor -%}
    </ul>
    {%- endif -%}
    {%- if entry.samePage -%}
        <ul>
            {%- for link in entry.samePage %}
                <li>
                    <a href="{{ entry.url | url }}#{{ link.url }}">
                        {{ link.title }}
                    </a>
                </li>
            {% endfor -%}
        </ul>
    {%- endif -%}
    </li>
{% endif %}
{%- endmacro %}
<gcds-site-menu menu-alignment="right" class="header__nav">
    <span slot="left">{{ nav[locale].title }}</span>
    <ul >
    {%- for entry in navPages %}
        {%- if entry.locale == locale %}{{ renderNavListItem(entry) }}{% endif -%}
    {%- endfor -%}
    </ul>
</gcds-site-menu>
